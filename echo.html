<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Echo</title>
  <style>
    body {
      background-color: #111;
      color: #0f0;
      font-family: monospace;
      padding: 2em;
      overflow: hidden;
    }

    #message {
      font-size: 1.5em;
      margin-bottom: 2em;
    }

    #next-btn {
      display: none;
      padding: 0.5em 1em;
      background-color: #0f0;
      color: #111;
      border: none;
      cursor: pointer;
      font-size: 1em;
    }

    /* Achievement Styles */
    #achievement-box {
      display: none;
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: rgba(30,30,30,0.95);
      border: 2px solid #0f0;
      padding: 10px 14px;
      color: white;
      font-family: Arial, sans-serif;
      width: 320px;
      z-index: 9999;
      display: flex;
      align-items: center;
      border-radius: 6px;
      box-shadow: 0 0 12px #0f0;
    }

    .achievement-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(45deg, #444, #777);
      border-radius: 6px;
      margin-right: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: #0f0;
      border: 2px solid #0f0;
      font-weight: bold;
    }

    .achievement-text {
      display: flex;
      flex-direction: column;
    }

    .achievement-title {
      font-weight: bold;
      font-size: 1em;
    }

    .achievement-desc {
      font-size: 0.85em;
      color: #ccc;
    }
  </style>
</head>
<body>

<div id="message">Initializing...</div>
<button id="next-btn" onclick="location.href='nextpage.html'">Next Site</button>

<div id="achievement-box">
  <div class="achievement-icon">ðŸŒ€</div>
  <div class="achievement-text">
    <div class="achievement-title">Achievement Unlocked</div>
    <div class="achievement-desc">You made your point</div>
  </div>
</div>

<audio id="xbox-sound" src="https://upload.wikimedia.org/wikipedia/en/2/27/Xbox_360_Achievement_Unlocked_Sound.ogg"></audio>

<script>
  const message = document.getElementById('message');
  const nextBtn = document.getElementById('next-btn');
  const achievementBox = document.getElementById('achievement-box');
  const sound = document.getElementById('xbox-sound');

  const STORAGE_KEY = 'echo_refresh_count';
  const ACHIEVEMENT_KEY = 'achievement_echo_master';
  const LAST_RESET_KEY = 'echo_last_reset';
  const MAX_COUNT = 20;
  const RESET_INTERVAL = 60 * 60 * 1000; // 1 hour

  // Reset if 1 hour has passed
  const lastReset = localStorage.getItem(LAST_RESET_KEY);
  if (!lastReset || Date.now() - parseInt(lastReset) > RESET_INTERVAL) {
    localStorage.setItem(STORAGE_KEY, "0");
    localStorage.setItem(LAST_RESET_KEY, Date.now().toString());
  }

  // Count refresh
  let count = parseInt(localStorage.getItem(STORAGE_KEY) || "0") + 1;
  localStorage.setItem(STORAGE_KEY, count.toString());

  // Show appropriate message
  if (count === 1) {
    message.innerText = "There's nothing here";
  } else if (count === 2) {
    message.innerText = "Still nothing";
  } else if (count === 3) {
    message.innerText = "Fine";
    nextBtn.style.display = 'inline-block';
  }

  // Achievement trigger
  if (count === MAX_COUNT && !localStorage.getItem(ACHIEVEMENT_KEY)) {
    localStorage.setItem(ACHIEVEMENT_KEY, "unlocked");
    showAchievement();
  }

  function showAchievement() {
    achievementBox.style.display = 'flex';
    sound.play();
    setTimeout(() => {
      achievementBox.style.display = 'none';
    }, 4000);
  }
</script>

</body>
</html>
